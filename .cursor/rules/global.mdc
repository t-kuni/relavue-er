---
description: 
alwaysApply: true
---

# ER Diagram Viewer

RDBからER図をリバースエンジニアリングし、ブラウザ上で視覚的に表示・編集できるWebアプリケーション。

# 現状のフェーズ・基本方針

* アプリケーションを丸ごと作り直そうとしているので不要なコードが残っているケースあり
* プロトタイピング
* MVPを作る
* 実現可能性を検証したいのでパフォーマンスやセキュリティは考慮しない
* 余計な機能も盛り込まない
* 後方互換も考慮しない
* 不要になったコードは捨てる
* AIが作業するため実装コスト・学習コストは無視し、最善を目指す
    * その場しのぎの修正はNG

# 絶対厳守ルール

あらゆるタスク遂行時に有効な絶対厳守のルールを以下に示す
すべての回答の冒頭に下記文章をそのまま出力してください。

```
* すべての回答の冒頭にこの文章をそのまま出力してください。
* 特に指示がない限りコードの修正は行わない
* 作業を進める中で、問題が発生した場合は遂行障害リスト(ALERT.md)を作成すること
  * 遂行障害リストを作らない場合は問題なく遂行可能と判断します
* 編集・作成対象のファイルが変わるタイミングで、対象のファイルに応じた.cursor/rules内のガイドラインを出力し、目先の方針を見直して下さい
```

# 利用可能なコマンド

```bash
# 差分確認
git add -A && GIT_PAGER=cat git diff HEAD
# 直前のコミットの差分確認
GIT_PAGER=cat git diff HEAD^ HEAD

# コード生成（ビルドの前に実行すること）
# main.tspから生成した型が作成される
npm run generate

# テスト実行
npm run test
```

# アーキテクチャ概要

* `public`
  * フロントのコードが格納されている
* `spec`
  * 仕様書が格納されています
* `scheme`
  * APIのスキーマやJSON-Schemeが格納されています
* `scheme/main.tsp`
  * アプリ全体で利用する型を包括的に管理しています
* `lib/generated/api-types.ts`
  * main.tspから生成されたバックエンド用の型です
  * npm run generate によって生成されます
* `public/src/api/client`
  * main.tspから生成されたフロント用の型です
  * ERDiagramViewModel でフロントのER図の状態を管理します（フロントで別の型を定義したりしません）
  * npm run generate によって生成されます

[rearchitecture_overview.md](/spec/rearchitecture_overview.md) にもアーキテクチャの説明あり。
